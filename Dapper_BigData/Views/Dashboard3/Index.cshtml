
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/UI/Index.cshtml";
}



<div class="main-content-container overflow-hidden">
    <div class="card gradient-bg-2 p-4 pb-0 rounded-10 border-0 mb-4">
        <div class="row">
            <div class="col-xxl-6 col-xxxl-12">
                <div class="pe-xxl-4">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="card bg-white p-20 rounded-10 border border-white mb-4">
                                <div class="d-flex">
                                    <div class="flex-grow-1">
                                        <h3 class="mb-10">Total Employee</h3>
                                        <h2 class="fs-26 mb-0 lh-1 fw-medium">1,705</h2>
                                    </div>
                                    <div class="flex-shrink-0 ms-3">
                                        <div class="bg-info text-white text-center rounded-circle d-flex justify-content-center align-items-center" style="width: 65px; height: 65px;">
                                            <i class="material-symbols-outlined fs-30">diversity_3</i>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center" style="margin-top: 16px;">
                                    <p class="mb-0 fs-14">4.75% Increase in last month</p>
                                    <span class="d-flex align-content-center gap-1 bg-success bg-opacity-10 border border-success" style="padding: 3px 5px;">
                                        <i class="material-symbols-outlined fs-14 text-success">trending_up</i>
                                        <span class="lh-1 fs-14 text-success">4.75%</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="card bg-white p-20 rounded-10 border border-white mb-4">
                                <div class="d-flex">
                                    <div class="flex-grow-1">
                                        <h3 class="mb-10">New Employee</h3>
                                        <h2 class="fs-26 mb-0 lh-1 fw-medium">35</h2>
                                    </div>
                                    <div class="flex-shrink-0 ms-3">
                                        <div class="bg-primary-50 text-white text-center rounded-circle d-flex justify-content-center align-items-center" style="width: 65px; height: 65px;">
                                            <i class="material-symbols-outlined fs-30">groups</i>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center" style="margin-top: 16px;">
                                    <p class="mb-0 fs-14">15.5% Increase in last month</p>
                                    <span class="d-flex align-content-center gap-1 bg-success bg-opacity-10 border border-success" style="padding: 3px 5px;">
                                        <i class="material-symbols-outlined fs-14 text-success">trending_up</i>
                                        <span class="lh-1 fs-14 text-success">15.5%</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="card bg-white p-20 rounded-10 border border-white mb-4">
                                <div class="d-flex">
                                    <div class="flex-grow-1">
                                        <h3 class="mb-10">Departures Employee</h3>
                                        <h2 class="fs-26 mb-0 lh-1 fw-medium">5</h2>
                                    </div>
                                    <div class="flex-shrink-0 ms-3">
                                        <div class="bg-warning text-white text-center rounded-circle d-flex justify-content-center align-items-center" style="width: 65px; height: 65px;">
                                            <i class="material-symbols-outlined fs-30">supervisor_account</i>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center" style="margin-top: 16px;">
                                    <p class="mb-0 fs-14">5.25% departure in  last month</p>
                                    <span class="d-flex align-content-center gap-1 bg-danger bg-opacity-10 border border-danger" style="padding: 3px 5px;">
                                        <i class="material-symbols-outlined fs-14 text-danger">trending_down</i>
                                        <span class="lh-1 fs-14 text-danger">5.25%</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="card bg-white p-20 rounded-10 border border-white mb-4">
                                <div class="d-flex">
                                    <div class="flex-grow-1">
                                        <h3 class="mb-10">Employee Salary</h3>
                                        <h2 class="fs-26 mb-0 lh-1 fw-medium">$3.5M</h2>
                                    </div>
                                    <div class="flex-shrink-0 ms-3">
                                        <div class="bg-info-40 text-white text-center rounded-circle d-flex justify-content-center align-items-center" style="width: 65px; height: 65px;">
                                            <i class="material-symbols-outlined fs-30">account_balance</i>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center" style="margin-top: 16px;">
                                    <p class="mb-0 fs-14">10.15% Increase in last month</p>
                                    <span class="d-flex align-content-center gap-1 bg-success bg-opacity-10 border border-success" style="padding: 3px 5px;">
                                        <i class="material-symbols-outlined fs-14 text-success">trending_up</i>
                                        <span class="lh-1 fs-14 text-success">10.15%</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xxl-6 col-xxxl-12">
                <div class="mb-4">
                    <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
                        <h3 class="text-white">Employee Performance</h3>

                        <div class="dropdown select-dropdown without-border border-style">
                            <button class="dropdown-toggle bg-transparent text-white fs-15" data-bs-toggle="dropdown" aria-expanded="false">
                                Monthly
                            </button>

                            <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow rounded-10" data-simplebar>
                                <li>
                                    <button class="dropdown-item text-secondary">Yearly</button>
                                </li>
                                <li>
                                    <button class="dropdown-item text-secondary">Weekly</button>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div style="margin: 0 -10px -14px -17px;">
                        <div id="employee_performance_chart"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
 
    <div class="row">
        
       

        <div class="col-lg-6">
            <div class="card bg-white rounded-10 border border-white p-20 mb-4">
                <h3 class="mb-20">Aylık Ürün Satış Performansı</h3>
                <div id="dashed_line_chart2"></div>
            </div>
        </div>



        <div class="col-lg-6">
            <div class="card bg-white rounded-10 border border-white p-20 mb-4">
                <h3 class="mb-20">Aylık Ürün Çeşitliliği & Ödeme Yöntemi</h3>
                <div id="data_labels_column_chart2"></div>
            </div>
        </div>

        <div class="col-lg-6 col-md-6">
            <div class="card bg-white rounded-10 border border-white p-20 mb-4">
                <h3 class="mb-20">Polygon Radar Chart</h3>

                <div id="polygon_radar_chart2"></div>
            </div>
        </div>

        <div class="col-lg-6 col-md-6">
            <div class="card bg-white rounded-10 border border-white p-20 mb-4">
                <h3 class="mb-20">Aylık Sipariş Tutarı Dağılımı</h3>
                <div id="basic_boxplot_chart2"></div>
            </div>
        </div>



        <div class="col-lg-12 col-md-12">
            <div class="card bg-white rounded-10 border border-white p-20 mb-4">
                <h3 class="mb-20">Ülke Bazlı Müşteri Yoğunluğu</h3>
                <div id="basic_treemap_chart2"></div>
            </div>
        </div>

       
    </div>
    








</div>


<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script>
    document.addEventListener("DOMContentLoaded", function() {

        const chartId = document.getElementById('dashed_line_chart2');

        if (chartId) {
            // Verileri Al
            var totalData = @Html.Raw(Json.Serialize(ViewBag.SeriesTotal));
            var maxData = @Html.Raw(Json.Serialize(ViewBag.SeriesMax));
            var minData = @Html.Raw(Json.Serialize(ViewBag.SeriesMin));
            var maxNames = @Html.Raw(Json.Serialize(ViewBag.NamesMax));
            var minNames = @Html.Raw(Json.Serialize(ViewBag.NamesMin));

            var options = {
                series: [
                    {
                        name: "Toplam Satış",
                        type: "area", // Toplamı 'Area' yapalım ki zemin dolsun, ayrışsın
                        data: totalData
                    },
                    {
                        name: "En Çok Satan",
                        type: "line",
                        data: maxData
                    },
                    {
                        name: "En Az Satan",
                        type: "line",
                        data: minData
                    }
                ],
                chart: {
                    height: 350,
                    type: "line",
                    toolbar: { show: false }
                },
                // Renkler: Mor (Toplam), Turkuaz (Max), Turuncu (Min)
                colors: ["#796df6", "#00cae3", "#ffb264"],

                stroke: {
                    width: [0, 4, 4], // Area'nın çizgisi yok, diğerleri 4px
                    curve: "smooth",
                    dashArray: [0, 0, 5] // Min satış kesikli çizgi olsun
                },
                fill: {
                    // Area (Toplam) biraz saydam olsun, diğerleri solid
                    type: ['gradient', 'solid', 'solid'],
                    gradient: {
                        shadeIntensity: 1,
                        opacityFrom: 0.4,
                        opacityTo: 0.05,
                        stops: [0, 100]
                    }
                },
                dataLabels: { enabled: false },
                legend: {
                    show: true,
                    position: 'top',
                    horizontalAlign: 'right'
                },
                xaxis: {
                    categories: ["Oca", "Şub", "Mar", "Nis", "May", "Haz", "Tem", "Ağu", "Eyl", "Eki", "Kas", "Ara"],
                    axisBorder: { show: false },
                    axisTicks: { show: false },
                    labels: {
                        style: { colors: "#919aa3", fontSize: "12px", fontFamily: 'Outfit' }
                    }
                },

                // --- İŞTE SİHİRLİ KISIM: ÇİFT EKSEN AYARI ---
                yaxis: [
                    {
                        // 1. EKSEN (SOL) - TOPLAM SATIŞ İÇİN
                        seriesName: 'Toplam Satış',
                        title: {
                            text: 'Genel Toplam',
                            style: { color: '#796df6' }
                        },
                        labels: {
                            style: { colors: '#796df6' }
                        }
                    },
                    {
                        // 2. EKSEN (SAĞ) - TEKİL ÜRÜNLER İÇİN
                        seriesName: 'En Çok Satan', // Bu ekseni Max ve Min paylaşacak
                        opposite: true, // Sağ tarafa al
                        title: {
                            text: 'Ürün Bazlı Adet',
                            style: { color: '#00cae3' }
                        },
                        labels: {
                            style: { colors: '#00cae3' }
                        }
                    },
                    {
                        // 3. EKSEN (GİZLİ) - Min satış da Sağ ekseni kullansın diye
                        seriesName: 'En Çok Satan', // Aynı ismi vererek ölçeği birleştiriyoruz
                        opposite: true,
                        show: false // Göstermeye gerek yok, üsttekiyle aynı
                    }
                ],

                grid: {
                    borderColor: "#f1f1f1",
                    strokeDashArray: 4
                },

                // Tooltip Ayarları (Ürün İsimleri)
                tooltip: {
                    shared: true,
                    intersect: false,
                    y: [
                        {
                            formatter: function (y) {
                                if(typeof y !== "undefined") return y + " Toplam Sipariş";
                                return y;
                            }
                        },
                        {
                            formatter: function (y, { dataPointIndex }) {
                                if(typeof y !== "undefined") {
                                    var name = maxNames[dataPointIndex] || "";
                                    return y + " Adet (" + name + ")";
                                }
                                return y;
                            }
                        },
                        {
                            formatter: function (y, { dataPointIndex }) {
                                if(typeof y !== "undefined") {
                                    var name = minNames[dataPointIndex] || "";
                                    return y + " Adet (" + name + ")";
                                }
                                return y;
                            }
                        }
                    ]
                }
            };

            const chart = new ApexCharts(document.querySelector('#dashed_line_chart2'), options);
            chart.render();
        }
    });
</script>







<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script>
    document.addEventListener("DOMContentLoaded", function() {

        // HTML'deki ID ile burası eşleşmeli
        const chartId = document.getElementById('data_labels_column_chart2');

        if (chartId) {
            // Controller'dan gelen veriler
            var seriesData = @Html.Raw(Json.Serialize(ViewBag.ProductCounts));
            var paymentMethods = @Html.Raw(Json.Serialize(ViewBag.PaymentMethods));

            var options = {
                series: [
                    {
                        name: "Farklı Ürün Sayısı",
                        data: seriesData
                    }
                ],
                chart: {
                    height: 350,
                    type: "bar",
                    toolbar: { show: true }
                },
                plotOptions: {
                    bar: {
                        dataLabels: {
                            position: "top", // Sayılar sütunun tepesinde
                        },
                        columnWidth: '50%',
                        borderRadius: 4
                    }
                },
                dataLabels: {
                    enabled: true,
                    formatter: function(val) {
                        return val;
                    },
                    offsetY: -20,
                    style: {
                        fontSize: "12px",
                        fontFamily: 'Outfit',
                        colors: ["#304758"]
                    }
                },
                xaxis: {
                    categories: ["Oca", "Şub", "Mar", "Nis", "May", "Haz", "Tem", "Ağu", "Eyl", "Eki", "Kas", "Ara"],
                    position: "bottom",
                    axisBorder: { show: false },
                    axisTicks: { show: false },
                    labels: {
                        style: {
                            colors: "#919aa3",
                            fontSize: "14px",
                            fontFamily: 'Outfit',
                        }
                    },
                    tooltip: {
                        enabled: true,
                        offsetY: -35
                    }
                },
                yaxis: {
                    axisBorder: { show: false },
                    axisTicks: { show: false },
                    labels: {
                        show: false,
                    }
                },
                colors: ["#0f79f3"],
                title: {
                    text: "Ürün Çeşitliliği & Ödeme Yöntemi",
                    align: "left",
                    style: {
                        fontSize: '15px',
                        fontFamily: 'Outfit',
                        color: '#475569'
                    }
                },
                grid: {
                    show: true,
                    strokeDashArray: 5,
                    borderColor: "#e0e0e0"
                },
                tooltip: {
                    shared: true,
                    intersect: false,
                    custom: function({series, seriesIndex, dataPointIndex, w}) {
                        var count = series[seriesIndex][dataPointIndex];
                        var method = paymentMethods[dataPointIndex] || "Veri Yok";

                        return `
                            <div style="padding: 10px; font-family: 'Outfit'; background: #fff; border: 1px solid #eee; border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                <div style="font-weight: bold; color: #0f79f3;">${count} Farklı Ürün</div>
                                <div style="font-size: 12px; color: #666; margin-top: 4px;">
                                    En Çok Kullanılan Ödeme:<br>
                                    <strong>${method}</strong>
                                </div>
                            </div>
                        `;
                    }
                }
            };

            const chart = new ApexCharts(document.querySelector('#data_labels_column_chart2'), options);
            chart.render();
        }
    });
</script>




<script>
    document.addEventListener("DOMContentLoaded", function() {

        const getPolygonRadarId = document.getElementById('polygon_radar_chart2');

        if (getPolygonRadarId) {

            // C#'tan gelen 7 günlük veri (Pazar, Pzt, Sal, Çar, Per, Cum, Cmt)
            var radarSeriesData = @Html.Raw(Json.Serialize(ViewBag.RadarData));

            var options = {
                series: [
                    {
                        name: "Sipariş Yoğunluğu",
                        data: radarSeriesData
                    }
                ],
                chart: {
                    height: 350,
                    type: "radar",
                    toolbar: { show: false }
                },
                dataLabels: {
                    enabled: true,
                    style: {
                        colors: ['#0f79f3']
                    }
                },
                plotOptions: {
                    radar: {
                        size: 110, // Grafiğin boyutu
                        polygons: {
                            strokeColors: '#e9e9e9',
                            connectorColors: '#e9e9e9',
                            fill: {
                                colors: ["#f8f8f8", "#ffffff"]
                            }
                        }
                    }
                },
                title: {
                    text: "Haftalık Sipariş Yoğunluğu",
                    align: "left",
                    style: {
                        fontWeight: '500',
                        fontSize: '15px',
                        fontFamily: 'Outfit',
                        color: '#475569'
                    }
                },
                colors: ["#0f79f3"], // Mavi Tema
                markers: {
                    size: 5,
                    colors: ["#ffffff"],
                    strokeColors: ["#0f79f3"],
                    strokeWidth: 2,
                    hover: {
                        size: 7
                    }
                },
                tooltip: {
                    y: {
                        formatter: function(val) {
                            return val + " Sipariş";
                        }
                    }
                },
                xaxis: {
                    // SQL'den Pazar (1) olarak başladığı için sıralama böyle olmalı
                    categories: [
                        "Pazar",
                        "Pazartesi",
                        "Salı",
                        "Çarşamba",
                        "Perşembe",
                        "Cuma",
                        "Cumartesi"
                    ],
                    labels: {
                        show: true,
                        style: {
                            colors: ["#919aa3", "#919aa3", "#919aa3", "#919aa3", "#919aa3", "#919aa3", "#919aa3"],
                            fontSize: "12px",
                            fontFamily: 'Outfit'
                        }
                    }
                },
                yaxis: {
                    show: false, // İçerideki sayıları gizledim, daha temiz durur
                    tickAmount: 5
                }
            };

            const chart = new ApexCharts(document.querySelector('#polygon_radar_chart2'), options);
            chart.render();
        }
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script>
    document.addEventListener("DOMContentLoaded", function() {

        const chartId = document.getElementById('basic_boxplot_chart2');

        if (chartId) {
            // C#'tan gelen veriler
            var boxData = @Html.Raw(Json.Serialize(ViewBag.BoxPlotData));
            var outlierData = @Html.Raw(Json.Serialize(ViewBag.OutlierData));

            var options = {
                series: [
                    {
                        name: 'Fiyat Aralığı',
                        type: 'boxPlot',
                        data: boxData
                    },
                    {
                        name: 'Aşırı Pahalı Ürünler',
                        type: 'scatter',
                        data: outlierData
                    }
                ],
                chart: {
                    height: 350,
                    type: "boxPlot",
                    toolbar: { show: true }
                },
                // Renkler: Kutu içi (Mavi), Noktalar (Kırmızı)
                colors: ['#00cae3', '#ff5b5b'],
                title: {
                    text: 'Ürünlerin Fiyat Makası',
                    align: 'left',
                    style: {
                        fontSize: '15px',
                        fontFamily: 'Outfit',
                        color: '#475569'
                    }
                },
                xaxis: {
                    type: 'category',
                    tooltip: { enabled: false },
                    labels: {
                        style: {
                            fontSize: '12px',
                            colors: '#919aa3'
                        }
                    }
                },
                yaxis: {
                    labels: {
                        formatter: function (val) {
                            return val.toFixed(0) + " ₺";
                        },
                        style: { colors: "#919aa3" }
                    }
                },
                plotOptions: {
                    boxPlot: {
                        colors: {
                            upper: '#00cae3', // Kutunun üst yarısı
                            lower: '#b2ebf2'  // Kutunun alt yarısı (daha açık ton)
                        }
                    }
                },
                grid: {
                    borderColor: '#f1f1f1',
                    strokeDashArray: 4
                },
                tooltip: {
                    shared: false,
                    intersect: true
                }
            };

            const chart = new ApexCharts(document.querySelector('#basic_boxplot_chart2'), options);
            chart.render();
        }
    });
</script>




<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script>
    document.addEventListener("DOMContentLoaded", function() {

        const getBasicTreemapId = document.getElementById('basic_treemap_chart2');

        if (getBasicTreemapId) {
            // C#'tan gelen veriyi al
            var countrySeries = @Html.Raw(Json.Serialize(ViewBag.CountryTreemapData));

            var options = {
                series: [
                    {
                        data: countrySeries
                    }
                ],
                chart: {
                    height: 350,
                    type: "treemap",
                    toolbar: { show: true }
                },
                title: {
                    text: "Müşterilerin Ülke Dağılımı",
                    align: "left",
                    style: {
                        fontWeight: '500',
                        fontSize: '15px',
                        fontFamily: 'Outfit',
                        color: '#475569'
                    }
                },
                colors: [
                    '#3B93A5', '#F7B844', '#ADD8C7', '#EC3C65', '#CDD7B6',
                    '#C1F666', '#D43F97', '#1E5D8C', '#421243', '#7F94B0',
                    '#EF6537', '#C0ADDB'
                ],
                plotOptions: {
                    treemap: {
                        distributed: true, // Her kutuya farklı renk ver
                        enableShades: false
                    }
                },
                dataLabels: {
                    enabled: true,
                    style: {
                        fontSize: '14px',
                        fontFamily: 'Outfit',
                        fontWeight: 'bold'
                    },
                    formatter: function(text, op) {
                        return [text, op.value]; // İsim ve Altına Sayı yazsın
                    },
                    offsetY: -4
                },
                legend: {
                    show: false // Treemap'te isimler zaten içinde yazdığı için lejanda gerek yok
                }
            };

            var chart = new ApexCharts(document.querySelector("#basic_treemap_chart2"), options);
            chart.render();
        }
    });
</script>

